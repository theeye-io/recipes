{"task":{"enable":true,"type":"script","public":false,"tags":["test","working"],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"fixed","label":"holidaypath","value":"/opt/theeye-agent/scripts/holidays.js","help":"","readonly":true,"required":true,"masked":false,"options":[]}],"output_parameters":[],"register_body":false,"execution_count":15,"multitasking":true,"user_inputs":false,"user_inputs_members":[],"show_result":false,"script_arguments":[{"id":1,"order":0,"type":"fixed","label":"holidaypath","value":"/opt/theeye-agent/scripts/holidays.js","help":"","readonly":true,"required":true,"masked":false,"options":[]}],"logging":false,"_type":"ScriptTask","creation_date":"2020-08-31T22:48:46.179Z","last_update":"2020-09-11T00:00:00.121Z","env":{"INDICATORID":"5ccb50447dbdc0000fd2cc85","ACCESSTOKEN":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNWYyNDExMzFkYjk2MmMwMDE0NzdhYzZiIiwiaWF0IjoxNTk2MTk5MjE3LCJleHAiOjE1OTYyMTAwMTd9.aAuHuu9ef5J7c1DzwjAmgmM02F72_bi6vRfXRovvuq8"},"name":"verificar dia habil - Test and Working","description":"","timeout":600000,"script_runas":"\"/usr/bin/node\" %script%","template":null,"template_id":null,"source_model_id":"5f4d7e4e3816a90012cdcc3f","script_id":"5f4d7e349b9af000129cc811"},"file":{"filename":"isWeekendOrHoliday.js","keyname":"isWeekendOrHoliday.js[ts:1598914651488]","mimetype":"text/javascript","extension":"js","size":1708,"description":"","md5":"3ff16aeb2d65bb6a8a2cc9cd36db83e1","public":false,"tags":[],"source_model_id":"5f4d7e349b9af000129cc811","data":"Y29uc3QgZ290ID0gcmVxdWlyZSgnZ290JykKY29uc3QgaG9saWRheXMgPSBwcm9jZXNzLmFyZ3ZbMl0KY29uc3QgaW5kaWNhdG9ySUQgPSBwcm9jZXNzLmVudi5JTkRJQ0FUT1JJRApjb25zdCBhY2Nlc3NUb2tlbiA9IHByb2Nlc3MuZW52LkFDQ0VTU1RPS0VOCgoKY29uc3QgbWFpbiA9IGFzeW5jICgpID0+IHsKICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCkKICAgIHRvZGF5LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpKQogICAgCiAgICBpZiAoaXNXZWVrZW5kKHRvZGF5KSB8fCBhd2FpdCBpc0hvbGlkYXkodG9kYXkpKSB7CiAgICAgICAgY29uc29sZS5sb2coJ05vIGVzIEhhYmlsJykKICAgICAgICBhd2FpdCB1cGRhdGVJbmRpY2F0b3IoJ2ZhaWx1cmUnLCAnTm8nKQogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnRXMgSGFiaWwnKQogICAgICAgIGF3YWl0IHVwZGF0ZUluZGljYXRvcignbm9ybWFsJywgJ1NpJykKICAgIH0KCiAgICBsb2dTdWNjZXNzQW5kRXhpdCgpCn0KCmNvbnN0IGlzV2Vla2VuZCA9IChkYXRlKSA9PiB7CiAgICBpZiAoZGF0ZS5nZXREYXkoKSA9PT0gNiB8fCBkYXRlLmdldERheSgpID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KfQoKY29uc3QgaXNIb2xpZGF5ID0gYXN5bmMgKGRhdGUpID0+IHsKCiAgICBsZXQgcGFyc2VkRGF0ZSA9IGF3YWl0IHBhcnNlTWFudWFsRGF0ZShkYXRlKQogICAgCiAgICBmb3IgKGNvbnN0IGRhdGUgb2YgaG9saWRheXMpIHsKICAgICAgICAgICAgICAgIAogICAgICAgIGlmIChkYXRlID09PSBwYXJzZWREYXRlKQoKICAgICAgICAgICAgcmV0dXJuIHRydWUKCiAgICB9Cgp9Cgpjb25zdCBwYXJzZU1hbnVhbERhdGUgPSBhc3luYyAobWFudWFsRGF0ZSkgPT4gewoKICAgIGxldCBkYXRlID0gbmV3IERhdGUobWFudWFsRGF0ZSkKICAgIGxldCBkZCA9ICgiMCIgKyAoZGF0ZS5nZXREYXRlKCkpKS5zbGljZSgtMikKICAgIGxldCBtbSA9ICgiMCIgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKQogICAgbGV0IHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgIHJldHVybiBkYXRlID0gYCR7ZGR9LyR7bW19LyR7eXl5eX1gCgp9Cgpjb25zdCB1cGRhdGVJbmRpY2F0b3IgPSBhc3luYyAoc3RhdHVzLCB2YWx1ZSkgPT4gewogICAgbGV0IGluZGljYXRvclJlc3BvbnNlID0gYXdhaXQgZ290LnBhdGNoKGBodHRwczovL3N1cGVydmlzb3IudGhlZXllLmlvL2luZGljYXRvci8ke2luZGljYXRvcklEfT9hY2Nlc3NfdG9rZW49JHthY2Nlc3NUb2tlbn0mY3VzdG9tZXI9bnViaWAsIHsKICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7ICdzdGF0ZSc6IHN0YXR1cywgJ3ZhbHVlJzogdmFsdWUgfSkKICAgIH0pCgogICAgcmV0dXJuIGluZGljYXRvclJlc3BvbnNlCn0KCmNvbnN0IGxvZ0Vycm9yQW5kRXhpdCA9IGVyciA9PiB7CiAgICBjb25zb2xlLmxvZyhlcnIpCiAgICBjb25zb2xlLmxvZygnZmFpbHVyZScpCiAgICBwcm9jZXNzLmV4aXQoKQp9Cgpjb25zdCBsb2dTdWNjZXNzQW5kRXhpdCA9ICgpID0+IHsKICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHsgc3RhdGU6ICdub3JtYWwnLCBkYXRhOiB0cnVlIH0pKQogICAgcHJvY2Vzcy5leGl0KCkKfQoKCgptYWluKCkuY2F0Y2gobG9nRXJyb3JBbmRFeGl0KQ=="}}