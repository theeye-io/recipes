{"task":{"enable":true,"type":"script","public":false,"tags":[],"grace_time":0,"task_arguments":[{"id":1,"order":0,"type":"input","label":"Input File Path","help":"","readonly":false,"required":true,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"output_parameters":[],"register_body":false,"execution_count":54,"multitasking":true,"user_inputs":false,"user_inputs_members":[],"show_result":false,"script_arguments":[{"id":1,"order":0,"type":"input","label":"Input File Path","help":"","readonly":false,"required":true,"masked":false,"charsmin":0,"charsmax":0,"charset":null,"pattern":"","options":[]}],"logging":false,"_type":"ScriptTask","creation_date":"2020-07-31T12:16:49.031Z","last_update":"2020-09-11T09:01:35.345Z","env":{"UNCOMPRESSED_PATH":"/mnt/data/s3UploadWorkflow/cashout/extractedFiles"},"name":"Unzip CashOut File","description":"","timeout":600000,"script_runas":"\"/usr/bin/node\" %script%","template":null,"template_id":null,"source_model_id":"5f240bb19b9af00012951f38","script_id":"5f240bb09b9af00012951f37"},"file":{"filename":"unzipFile.js","keyname":"unzipFile.js[ts:1596197808182]","mimetype":"text/javascript","extension":"js","size":1084,"description":"","md5":"95e9c23dde3d9722ce338175d1a99b17","public":false,"tags":[],"source_model_id":"5f240bb09b9af00012951f37","data":"Y29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKQpjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJykKY29uc3QgQWRtWmlwID0gcmVxdWlyZSgnYWRtLXppcCcpCgpjb25zdCB1bmNvbXByZXNzZWRQYXRoID0gcHJvY2Vzcy5lbnYuVU5DT01QUkVTU0VEX1BBVEgKY29uc3QgZmlsZW5hbWUgPSBwcm9jZXNzLmFyZ3ZbMl0KY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJykKCmNvbnN0IG1haW4gPSBhc3luYyAoKSA9PiB7CiAgdHJ5IHsKICAgIGlmICghZnMuZXhpc3RzU3luYyh1bmNvbXByZXNzZWRQYXRoKSkgewogICAgICBmcy5ta2RpclN5bmModW5jb21wcmVzc2VkUGF0aCkKICAgIH0KCiAgICBjb25zdCBoYXNoID0gYXdhaXQgZ2V0Q2hlY2tzdW0oZmlsZW5hbWUpCgogICAgbGV0IGRlc3RpbmF0aW9uID0gYCR7dW5jb21wcmVzc2VkUGF0aH0vJHtwYXRoLmJhc2VuYW1lKGZpbGVuYW1lLCAnLnppcCcpfV8ke2hhc2h9YAogICAgbGV0IHppcCA9IG5ldyBBZG1aaXAoZmlsZW5hbWUpCiAgICB6aXAuZXh0cmFjdEFsbFRvKGRlc3RpbmF0aW9uLCBvdmVycmlkZSA9IHRydWUpCgogICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoeyBzdGF0ZTogJ25vcm1hbCcsIGRhdGE6IFtkZXN0aW5hdGlvbl0gfSkpCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBsZXQgb3V0cHV0ID0geyBzdGF0ZTogJ2ZhaWx1cmUnLCBkYXRhOiBbZXJyLm1lc3NhZ2VdIH0KICAgIGNvbnNvbGUuZXJyb3IoSlNPTi5zdHJpbmdpZnkob3V0cHV0KSkKICAgIHByb2Nlc3MuZXhpdCgxKQogIH0KfQoKY29uc3QgZ2V0Q2hlY2tzdW0gPSAoZmlsZW5hbWUpID0+IHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgY29uc3QgbWQ1c3VtID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpCiAgICBsZXQgcyA9IGZzLlJlYWRTdHJlYW0oZmlsZW5hbWUpCiAgICBzLm9uKCdkYXRhJywgKGQpID0+IG1kNXN1bS51cGRhdGUoZCkpCiAgICBzLm9uKCdlcnJvcicsIChlcnIpID0+IHJlamVjdChlcnIpKQogICAgcy5vbignZW5kJywgKCkgPT4gcmVzb2x2ZShtZDVzdW0uZGlnZXN0KCdoZXgnKSkpCiAgfSkKfQoKbWFpbigpCg=="}}