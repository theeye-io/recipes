{"task":{"enable":true,"type":"script","public":false,"tags":["holidays"],"grace_time":0,"task_arguments":[],"output_parameters":[],"register_body":false,"execution_count":37,"multitasking":true,"user_inputs":false,"user_inputs_members":[],"show_result":false,"script_arguments":[],"logging":false,"_type":"ScriptTask","creation_date":"2019-05-02T19:44:08.396Z","last_update":"2019-06-03T03:01:00.964Z","user_id":null,"name":"Verificar dia habil","description":"Verifica si el día de la fecha es hábil (no es fin de semana ni feriado). Actualiza indicador 'Es día hábil' con el resultado. Corre todos los días a las 00:01 hs.","script_runas":"\"/usr/bin/node\" %script%","template":null,"template_id":null,"source_model_id":"5ccb488840f0bb000f8e4d24","env":{},"script_id":"5ccb485f7dbdc0000fd2cc2e"},"file":{"filename":"isHoliday.js","keyname":"isHoliday.js[ts:1556828560781]","mimetype":"application/javascript","extension":"js","size":1453,"description":"","md5":"df0c6dfa84364a6b50aa6bb812d0b9e0","public":false,"tags":[],"source_model_id":"5ccb485f7dbdc0000fd2cc2e","data":"Y29uc3QgbW9tZW50ID0gcmVxdWlyZSgnL3Vzci9saWIvbm9kZV9tb2R1bGVzL21vbWVudCcpCmNvbnN0IGdvdCA9IHJlcXVpcmUoJy91c3IvbGliL25vZGVfbW9kdWxlcy9nb3QnKQpjb25zdCBob2xpZGF5cyA9IHJlcXVpcmUoJy90bXAvaG9saWRheXMnKQpjb25zdCBjb25maWcgPSByZXF1aXJlKCcvdG1wL2NvbmZpZy1wcm9kJykKCi8vIGNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpCi8vIGNvbnN0IGdvdCA9IHJlcXVpcmUoJ2dvdCcpCi8vIGNvbnN0IGhvbGlkYXlzID0gcmVxdWlyZSgnLi9ob2xpZGF5cycpCi8vIGNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnLXByb2QnKQoKY29uc3QgaXNIb2xpZGF5ID0gKGRhdGUpID0+IHsKICByZXR1cm4gaG9saWRheXMuaW5kZXhPZihkYXRlKSAhPT0gLTEKfQoKY29uc3QgaXNXZWVrZW5kT3JIb2xpZGF5ID0gKGRhdGUpID0+IHsKICBjb25zdCBpc0RhdGVXZWVrZW5kID0gWzAsIDZdLmluZGV4T2YocGFyc2VJbnQobW9tZW50KGRhdGUsICdERC1NTS1ZWVlZJykuZGF5KCkpKSAhPT0gLTEKICBjb25zdCBpc0RhdGVIb2xpZGF5ID0gaXNIb2xpZGF5KG1vbWVudChkYXRlLCAnREQtTU0tWVlZWScpLmZvcm1hdCgnREQvTU0vWVlZWScpKQoKICByZXR1cm4gaXNEYXRlV2Vla2VuZCB8fCBpc0RhdGVIb2xpZGF5Cn0KCmNvbnN0IHVwZGF0ZUluZGljYXRvciA9IGFzeW5jIChzdGF0dXMsIHZhbHVlKSA9PiB7CiAgbGV0IGluZGljYXRvclJlc3BvbnNlID0gYXdhaXQgZ290LnBhdGNoKGAke2NvbmZpZy5pbmRpY2F0b3IuZGlhaGFiaWx9P2FjY2Vzc190b2tlbj0ke2NvbmZpZy5hY2Nlc3NUb2tlbn0mY3VzdG9tZXI9bnViaWAsIHsKICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSwKICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsnc3RhdGUnOiBzdGF0dXMsICd2YWx1ZSc6IHZhbHVlfSkKICB9KQoKICByZXR1cm4gaW5kaWNhdG9yUmVzcG9uc2UKfQoKY29uc3QgcnVuID0gYXN5bmMgKCkgPT4gewogIGxldCB2YWx1ZSA9IGlzV2Vla2VuZE9ySG9saWRheShuZXcgRGF0ZSgpKQogIGlmICh2YWx1ZSkgewogICAgYXdhaXQgdXBkYXRlSW5kaWNhdG9yKCdmYWlsdXJlJywgJ0ZBTFNFJykKICB9IGVsc2UgewogICAgYXdhaXQgdXBkYXRlSW5kaWNhdG9yKCdub3JtYWwnLCAnVFJVRScpCiAgfQoKICBsb2dTdWNjZXNzQW5kRXhpdCgpCn0KCmNvbnN0IGxvZ0Vycm9yQW5kRXhpdCA9IGVyciA9PiB7CiAgY29uc29sZS5sb2coZXJyKQogIGNvbnNvbGUubG9nKCdmYWlsdXJlJykKICBwcm9jZXNzLmV4aXQoKQp9Cgpjb25zdCBsb2dTdWNjZXNzQW5kRXhpdCA9ICgpID0+IHsKICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh7IHN0YXRlOiAnbm9ybWFsJywgZGF0YTogdHJ1ZSB9KSkKICBwcm9jZXNzLmV4aXQoKQp9CgpydW4oKS5jYXRjaChsb2dFcnJvckFuZEV4aXQpCg=="}}